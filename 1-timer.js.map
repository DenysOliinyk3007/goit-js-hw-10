{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport iziToast from \"izitoast\";\n//////////////////\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n//////////////////\n//////////////////\n\n\n\nfunction updateTime (convertedTime){\n  document.querySelector('[data-days]').textContent = convertedTime.days;\n  document.querySelector('[data-hours]').textContent = convertedTime.hours;\n  document.querySelector('[data-minutes]').textContent = convertedTime.minutes;\n  document.querySelector('[data-seconds]').textContent = convertedTime.seconds;\n}\n\n\nfunction addLeadingZero(value){\n  return String(value).padStart(2, '0');\n}\n\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return {days: addLeadingZero(days), hours: addLeadingZero(hours), minutes: addLeadingZero(minutes), seconds: addLeadingZero(seconds)};\n}\n\n\nfunction handleTimer(selectedTime, timerStep){\n  let interval = null;\n  let timeDiff = selectedTime.getTime() - getCurrenttime();\n  let finTime = convertMs(timeDiff);\n  updateTime(finTime);\n  interval = setInterval(() => {\n    if (timeDiff > 0){\n      timeDiff -= timerStep;\n      if (timeDiff <= 0){\n        updateTime(convertMs(0));\n        iziToast.show({message: 'Timer finished!', position: 'center', backgroundColor: 'red'});\n        clearInterval(interval);\n        btnClass.removeAttribute('disabled');\n        dateInput.removeAttribute('disabled');\n      }\n      else{\n        finTime = convertMs(timeDiff);\n        updateTime(finTime);\n      }\n    }\n  }, 1000);\n}\n\nfunction getCurrenttime(){\n  const time = new Date();\n  return time.getTime();\n}\n\n\nconst btnClass = document.querySelector('.start-btn');\nbtnClass.setAttribute('disabled', '');\n\nlet userSelectedDate = new Date();\nconst dateInput = document.querySelector('#datetime-picker');\ndateInput.addEventListener('click', () => {btnClass.setAttribute('disabled', '');})\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      let currentTime = getCurrenttime();\n      userSelectedDate = selectedDates[0];\n      if ((userSelectedDate.getTime() - currentTime) < 0){\n        iziToast.error({message: 'Please select the date in the future', position: 'topRight'});\n      }\n      else{\n        btnClass.removeAttribute('disabled');\n      }\n    },\n  };\nflatpickr(\"#datetime-picker\", options);\n\n\nbtnClass.addEventListener('click', (evt) => {\n  evt.target.disabled = true;\n  dateInput.setAttribute('disabled', '');\n  handleTimer(userSelectedDate, 1000)});\n\n\n\n\n"],"names":["updateTime","convertedTime","addLeadingZero","value","convertMs","ms","days","hours","minutes","seconds","handleTimer","selectedTime","timerStep","interval","timeDiff","getCurrenttime","finTime","iziToast","btnClass","dateInput","userSelectedDate","options","selectedDates","currentTime","flatpickr","evt"],"mappings":"2FAUA,SAASA,EAAYC,EAAc,CACjC,SAAS,cAAc,aAAa,EAAE,YAAcA,EAAc,KAClE,SAAS,cAAc,cAAc,EAAE,YAAcA,EAAc,MACnE,SAAS,cAAc,gBAAgB,EAAE,YAAcA,EAAc,QACrE,SAAS,cAAc,gBAAgB,EAAE,YAAcA,EAAc,OACvE,CAGA,SAASC,EAAeC,EAAM,CAC5B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAGA,SAASC,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAC,KAAMH,EAAeI,CAAI,EAAG,MAAOJ,EAAeK,CAAK,EAAG,QAASL,EAAeM,CAAO,EAAG,QAASN,EAAeO,CAAO,CAAC,CACtI,CAGA,SAASC,EAAYC,EAAcC,EAAU,CAC3C,IAAIC,EAAW,KACXC,EAAWH,EAAa,QAAS,EAAGI,EAAc,EAClDC,EAAUZ,EAAUU,CAAQ,EAChCd,EAAWgB,CAAO,EAClBH,EAAW,YAAY,IAAM,CACvBC,EAAW,IACbA,GAAYF,EACRE,GAAY,GACdd,EAAWI,EAAU,CAAC,CAAC,EACvBa,EAAS,KAAK,CAAC,QAAS,kBAAmB,SAAU,SAAU,gBAAiB,KAAK,CAAC,EACtF,cAAcJ,CAAQ,EACtBK,EAAS,gBAAgB,UAAU,EACnCC,EAAU,gBAAgB,UAAU,IAGpCH,EAAUZ,EAAUU,CAAQ,EAC5Bd,EAAWgB,CAAO,GAGvB,EAAE,GAAI,CACT,CAEA,SAASD,GAAgB,CAEvB,OADa,IAAI,OACL,SACd,CAGA,MAAMG,EAAW,SAAS,cAAc,YAAY,EACpDA,EAAS,aAAa,WAAY,EAAE,EAEpC,IAAIE,EAAmB,IAAI,KAC3B,MAAMD,EAAY,SAAS,cAAc,kBAAkB,EAC3DA,EAAU,iBAAiB,QAAS,IAAM,CAACD,EAAS,aAAa,WAAY,EAAE,CAAE,CAAC,EAClF,MAAMG,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,IAAIC,EAAcR,IAClBK,EAAmBE,EAAc,CAAC,EAC7BF,EAAiB,UAAYG,EAAe,EAC/CN,EAAS,MAAM,CAAC,QAAS,uCAAwC,SAAU,UAAU,CAAC,EAGtFC,EAAS,gBAAgB,UAAU,CAEtC,CACL,EACAM,EAAU,mBAAoBH,CAAO,EAGrCH,EAAS,iBAAiB,QAAUO,GAAQ,CAC1CA,EAAI,OAAO,SAAW,GACtBN,EAAU,aAAa,WAAY,EAAE,EACrCT,EAAYU,EAAkB,GAAI,CAAC,CAAC"}